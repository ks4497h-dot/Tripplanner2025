<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Osaka Trip Planner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>body { font-family: 'Inter', sans-serif; background: #f8fafc; }</style>
  </head>
  <body>
    <div id="root">ë¡œë”© ì¤‘... (API í‚¤ í™•ì¸í•˜ì„¸ìš”)</div>

    <script>
      // í™˜ê²½ ë³€ìˆ˜ ì§ì ‘ ì„¤ì • (Vercelì—ì„œ í´ë¼ì´ì–¸íŠ¸ì— ë…¸ì¶œ)
      window.VITE_GEMINI_API_KEY = 'YOUR_API_KEY_HERE';  // Vercel Envì—ì„œ ìë™ ì¹˜í™˜ë¨

      // CDN ìˆœì°¨ ë¡œë“œ (ì‹¤íŒ¨ ì‹œ fallback)
      function loadScript(src, callback) {
        const script = document.createElement('script');
        script.src = src;
        script.onload = callback;
        script.onerror = () => console.error('ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì‹¤íŒ¨: ' + src);
        document.head.appendChild(script);
      }

      loadScript('https://unpkg.com/react@18/umd/react.production.min.js', () => {
        loadScript('https://unpkg.com/react-dom@18/umd/react-dom.production.min.js', () => {
          loadScript('https://unpkg.com/@google/generative-ai@0.2.1/dist/index.umd.js', initApp);
        });
      });

      function initApp() {
        if (typeof React === 'undefined' || typeof google === 'undefined') {
          document.getElementById('root').innerHTML = '<p>CDN ë¡œë“œ ì‹¤íŒ¨. ìƒˆë¡œê³ ì¹¨ í•´ë³´ì„¸ìš”.</p>';
          return;
        }

        const { useState } = React;
        const { GoogleGenerativeAI } = google.generativeAI;
        const API_KEY = window.VITE_GEMINI_API_KEY;

        function App() {
          const [days, setDays] = useState("3");
          const [people, setPeople] = useState("2");
          const [budget, setBudget] = useState("100ë§Œì›");
          const [loading, setLoading] = useState(false);
          const [result, setResult] = useState("");

          const generate = async () => {
            if (!API_KEY || API_KEY === 'YOUR_API_KEY_HERE') {
              setResult("âŒ Gemini API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤! Vercel Settings > Environment Variablesì—ì„œ VITE_GEMINI_API_KEY ì¶”ê°€í•˜ì„¸ìš”.");
              return;
            }

            setLoading(true);
            setResult("ğŸ¤– AIê°€ ì˜¤ì‚¬ì¹´ ì—¬í–‰ ì¼ì • ìƒì„± ì¤‘... (10-30ì´ˆ ì†Œìš”)");

            try {
              const genAI = new GoogleGenerativeAI(API_KEY);
              const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash" });

              const prompt = `ì˜¤ì‚¬ì¹´ ${days}ì¼ ì—¬í–‰ ì¼ì • ë§Œë“¤ì–´ì¤˜. ì¸ì› ${people}ëª…, ì˜ˆì‚° ${budget}. 
              ë§›ì§‘ ìœ„ì£¼ë¡œ, ì´ë™ ê²½ë¡œ íš¨ìœ¨ì ìœ¼ë¡œ, í•œêµ­ì–´ë¡œ ìì—°ìŠ¤ëŸ½ê²Œ ì‘ì„±í•´ì¤˜. 
              ë‚ ì§œë³„ë¡œ ì œëª© ë‹¬ê³  ì•„ì¹¨/ì ì‹¬/ì €ë…/ê°„ì‹/ì•¼ê²½ê¹Œì§€ ìƒì„¸íˆ!`;

              const res = await model.generateContent(prompt);
              setResult(res.response.text());
            } catch (e) {
              setResult("âŒ ì˜¤ë¥˜: " + (e.message || 'API í‚¤ë‚˜ ë„¤íŠ¸ì›Œí¬ë¥¼ í™•ì¸í•˜ì„¸ìš”.'));
              console.error(e);
            }
            setLoading(false);
          };

          return React.createElement('div', { className: 'min-h-screen p-6 max-w-2xl mx-auto' },
            React.createElement('h1', { className: 'text-4xl font-bold text-center mb-2 text-rose-600' }, 'Osaka Trip Planner'),
            React.createElement('p', { className: 'text-center text-gray-600 mb-10' }, 'AIê°€ ë§Œë“¤ì–´ì£¼ëŠ” ìµœê³ ì˜ ì˜¤ì‚¬ì¹´ ì—¬í–‰ ì¼ì •'),
            React.createElement('div', { className: 'bg-white rounded-2xl shadow-xl p-8 space-y-6' },
              React.createElement('input', {
                placeholder: 'ëª‡ ë°• ëª‡ ì¼?',
                value: days,
                onChange: e => setDays(e.target.value),
                className: 'w-full px-5 py-4 rounded-xl border border-gray-300 focus:border-rose-400 focus:outline-none'
              }),
              React.createElement('input', {
                placeholder: 'ì¸ì› ìˆ˜',
                value: people,
                onChange: e => setPeople(e.target.value),
                className: 'w-full px-5 py-4 rounded-xl border border-gray-300 focus:border-rose-400 focus:outline-none'
              }),
              React.createElement('input', {
                placeholder: 'ì˜ˆì‚° (ì˜ˆ: 100ë§Œì›)',
                value: budget,
                onChange: e => setBudget(e.target.value),
                className: 'w-full px-5 py-4 rounded-xl border border-gray-300 focus:border-rose-400 focus:outline-none'
              }),
              React.createElement('button', {
                onClick: generate,
                disabled: loading,
                className: 'w-full bg-rose-600 hover:bg-rose-700 text-white font-bold py-5 rounded-xl disabled:opacity-50 transition-colors'
              }, loading ? 'ìƒì„± ì¤‘...' : 'ì—¬í–‰ ì¼ì • ë§Œë“¤ì–´ì¤˜!'),
              result && React.createElement('div', {
                className: 'mt-8 p-6 bg-rose-50 rounded-xl whitespace-pre-wrap text-sm leading-relaxed border border-rose-100'
              }, result)
            )
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
      }
    </script>
  </body>
</html>
