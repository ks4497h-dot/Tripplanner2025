<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Osaka Trip Planner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>body { font-family: 'Inter', sans-serif; background: #f8fafc; }</style>
  </head>
  <body>
    <div id="root">ë¡œë”© ì¤‘...</div>
    <script type="module">
      import React from 'https://esm.sh/react@18';
      import ReactDOM from 'https://esm.sh/react-dom@18/client';
      import { GoogleGenerativeAI } from 'https://esm.sh/@google/generative-ai@0.24.1';

      const API_KEY = import.meta.env.VITE_GEMINI_API_KEY;

      function App() {
        const [days, setDays] = React.useState("3");
        const [people, setPeople] = React.useState("2");
        const [budget, setBudget] = React.useState("100ë§Œì›");
        const [loading, setLoading] = React.useState(false);
        const [result, setResult] = React.useState("");

        const generate = async () => {
          if (!API_KEY) {
            setResult("âŒ API í‚¤ ì¶”ê°€ í•„ìš”! Vercel Env: VITE_GEMINI_API_KEY");
            return;
          }
          setLoading(true);
          setResult("ğŸ¤– AI ìƒì„± ì¤‘...");
          try {
            const genAI = new GoogleGenerativeAI(API_KEY);
            const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash" });
            const prompt = `ì˜¤ì‚¬ì¹´ ${days}ì¼ ì—¬í–‰ ì¼ì •. ì¸ì› ${people}ëª…, ì˜ˆì‚° ${budget}. ë§›ì§‘ ìœ„ì£¼ í•œêµ­ì–´ ì¼ì •.`;
            const res = await model.generateContent(prompt);
            setResult(res.response.text());
          } catch (e) {
            setResult("âŒ ì˜¤ë¥˜: " + e.message);
          }
          setLoading(false);
        };

        return React.createElement('div', { className: 'min-h-screen p-8 max-w-2xl mx-auto' },
          React.createElement('h1', { className: 'text-4xl font-bold text-center mb-4 text-rose-600' }, 'Osaka Trip Planner'),
          React.createElement('div', { className: 'bg-white rounded-2xl shadow-xl p-8 space-y-6' },
            React.createElement('input', { placeholder: 'ì¼ìˆ˜', value: days, onChange: e => setDays(e.target.value), className: 'w-full px-5 py-4 border rounded-xl' }),
            React.createElement('input', { placeholder: 'ì¸ì›', value: people, onChange: e => setPeople(e.target.value), className: 'w-full px-5 py-4 border rounded-xl' }),
            React.createElement('input', { placeholder: 'ì˜ˆì‚°', value: budget, onChange: e => setBudget(e.target.value), className: 'w-full px-5 py-4 border rounded-xl' }),
            React.createElement('button', { onClick: generate, disabled: loading, className: 'w-full bg-rose-600 text-white py-5 rounded-xl font-bold' },
              loading ? 'ìƒì„± ì¤‘...' : 'ì¼ì • ë§Œë“¤ê¸°!'
            ),
            result && React.createElement('div', { className: 'mt-8 p-6 bg-rose-50 rounded-xl whitespace-pre-wrap' }, result)
          )
        );
      }

      ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(App));
    </script>
  </body>
</html>
